---
- hosts: ansible-servers

# Note: ansible uses path of playbook as current working directory
  vars:
    users_json_file: ../vars/users.json
    apache_yml_file: ../vars/apache.yml
    mariadb_yml_file: ../vars/mariadb.yml
    php7_yml_file: ../vars/php7.yml
    percona_yml_file: ../vars/percona.yml

# Roles NOT yet updated for CentOS:
# java8
# elasticsearch
#
# FYI: Use percona as database, tends to work better with CentOS

  roles:
     - { role: common, tags: 'common' }
     - { role: users, tags: 'users' }
     - { role: apache, tags: ['apache', 'apache2'] }
#    we use percona for magento2 and middleware, so no need for mariadb       
#    - { role: mariadb, tags: ['mariadb', 'mariadb5.5'] }
     - { role: percona, tags: ['percona', 'percona5.6'] }
     - { role: php7, tags: ['php', 'php7'] }
     - { role: nodejs, tags: ['nodejs', 'npm'] }
     - { role: mailhog, tags: ['mailhog', 'local-smtp'] }
     - { role: java8, tags: ['java', 'java8'] }
     - { role: supervisor, tags: ['supervisor', 'supervisord'] }
#    - { role: elasticsearch, tags: ['elasticsearch', 'elasticsearch-5.x'] }
     - { role: supervisor-mailhog, tags: 'mailhog.setup' }
     - { role: memcached, tags: ['memcache', 'memcached'] }
     - { role: varnish, tags: ['varnish', 'varnish5'] }
